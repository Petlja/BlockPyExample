<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Embeded BlockPy Demo</title>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">

  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <!-- Popper JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>

  <!-- Latest compiled JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css">

  <script type="text/javascript" src="skulpt_dist/skulpt.min.js" type="text/javascript"></script>
  <script type="text/javascript" src="skulpt_dist/skulpt-stdlib.js" type="text/javascript"></script>

  <script type="text/javascript" src="../blockpy-petlja/blockly/blockly_compressed.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/blockly/blocks_compressed.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/blockly/python_compressed.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/blockly/msg/js/sr.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/src/utilities.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/src/python_errors.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/src/ast_node_visitor.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/src/abstract_interpreter.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/src/pytifa.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/src/abstract_interpreter_definitions.js"></script>
  <!-- <script type="text/javascript" src="../blockpy-petlja/src/abstract_interpreter_tests.js"></script> -->
  <script type="text/javascript" src="../blockpy-petlja/src/python_to_blockly.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/src/imported.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/src/blockly_blocks/class.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/src/blockly_blocks/comment.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/src/blockly_blocks/comprehensions.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/src/blockly_blocks/dict.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/src/blockly_blocks/if.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/src/blockly_blocks/io.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/src/blockly_blocks/lists.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/src/blockly_blocks/sets.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/src/blockly_blocks/loops.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/src/blockly_blocks/parking.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/src/blockly_blocks/tuple.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/src/blockly_blocks/turtles.js"></script>
  <script type="text/javascript" src="../blockpy-petlja/src/blockly_blocks/text.js"></script>

  <script type="text/javascript" src="blockpy-modal.js"></script>

  <style>
    body {
      background-color: #fff;
      font-family: sans-serif;
    }

    h1 {
      font-weight: normal;
      font-size: 140%;
    }
  </style>
</head>

<body>
  <h1>Embeded BlockPy Demo</h1>
 
  <div><button onclick="openModal()">Open blockly</button></div>
  <div id="srcDiv"><textarea id="pythonSrc" rows="20" cols="70"></textarea></div>
  <script>

    // Hack to prevent chrome errors. Forces audio to load on demand. 
    // See: https://github.com/google/blockly/issues/299
    Blockly.WorkspaceSvg.prototype.preloadAudio_ = function() {};

    var openModal = function() {
      var bpm = new  BlocklPyModal();
      bpm.open("Пример", 700, 500, document.getElementById("pythonSrc").value, '../blockly/media/',
        function(src) {
          if(src) {
            document.getElementById("pythonSrc").value = src;
          }
      });
    }
  </script>

</body>

</html>